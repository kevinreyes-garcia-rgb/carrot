<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CarrotMovie - Acceso Series</title>
  <meta name="description" content="CarrotMovie - Demo de acceso a series (versi√≥n est√°tica).">
  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --accent:#c86f8b;
      --muted:#606770;
      --danger:#d9534f;
      --radius:12px;
      --shadow: 0 8px 20px rgba(0,0,0,.08);
      --max-width:1150px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, "Segoe UI", Arial, sans-serif;
      background:linear-gradient(180deg,#f6f7fb 0%, #eef1f6 100%);
      color:#1b1d1f;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:24px;
      display:flex;
      justify-content:center;
    }

    .container{
      width:100%;
      max-width:var(--max-width);
    }

    header.site-header{
      display:flex;
      align-items:center;
      gap:16px;
      margin-bottom:24px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:16px;
    }
    .brand img{
      width:64px;
      height:64px;
      border-radius:12px;
      object-fit:cover;
      box-shadow:0 6px 16px rgba(0,0,0,.08);
      border:2px solid rgba(200,111,139,.08);
    }
    h1{margin:0;font-size:1.5rem;color:var(--accent)}

    /* Login card */
    .card{
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:20px;
    }

    .layout{
      display:grid;
      grid-template-columns: 360px 1fr;
      gap:24px;
    }
    @media (max-width:980px){ .layout{ grid-template-columns:1fr } }

    #login-container{
      border:2px solid rgba(200,111,139,.12);
      padding:22px;
    }
    label{display:block;margin-bottom:6px;font-size:.9rem}
    .input{
      width:100%;
      padding:10px 12px;
      border:1px solid #d7dbe2;
      border-radius:8px;
      font-size:1rem;
      margin-bottom:12px;
      background:transparent;
    }
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding:10px 14px;
      border-radius:8px;
      border:0;
      cursor:pointer;
      font-weight:600;
    }
    .btn-primary{ background:var(--accent); color:#fff }
    .btn-ghost{ background:transparent; border:1px solid #e6e9ee; color:var(--muted) }

    .msg{ font-weight:600; margin-top:8px; min-height:1.2em }
    .msg.error{ color:var(--danger) }
    .msg.success{ color: #2a9d49 }

    /* Main content */
    #main-content{ display:none }
    .section-title{ display:flex; justify-content:space-between; align-items:center; gap:16px; margin:18px 0; }
    .section-title h2{ margin:0; font-size:1.15rem; color:#333; border-bottom:3px solid transparent; padding-bottom:6px }
    .video-grid{
      display:grid;
      grid-template-columns: repeat(auto-fill, minmax(220px,1fr));
      gap:16px;
    }
    .video-item{
      background:var(--card);
      border-radius:10px;
      overflow:hidden;
      box-shadow: 0 6px 14px rgba(0,0,0,.04);
      border:1px solid #f0f2f5;
      display:flex;
      flex-direction:column;
    }
    .video-item video{ width:100%; height:auto; display:block; background:#000 }
    .video-item p{ padding:10px; margin:0; font-size:.9rem; color:var(--muted); text-align:center }

    /* private section */
    #private-section{ margin-top:18px; background:linear-gradient(90deg,#fff9ed,#fff3cd); border-radius:10px; padding:14px; border:1px solid #ffeeba }
    .controls-row{ display:flex; gap:8px; align-items:center; flex-wrap:wrap }

    /* small helpers */
    .muted{ color:var(--muted); font-size:.9rem }
    .visually-hidden{ position:absolute !important; height:1px; width:1px; overflow:hidden; clip:rect(1px,1px,1px,1px); white-space:nowrap }

  </style>
</head>
<body>
  <div class="container">
    <header class="site-header">
      <div class="brand">
        <img src="https://files.catbox.moe/fdchtm.jpeg" alt="Logo CARROT Movies">
        <div>
          <h1>CARROT Movies (Demo)</h1>
          <div class="muted">Versi√≥n est√°tica ‚Ä¢ Autenticaci√≥n en cliente (no segura)</div>
        </div>
      </div>
    </header>

    <div class="layout">
      <!-- Login / Panel izquierdo -->
      <aside class="card" id="login-container" aria-labelledby="login-heading" role="region">
        <h2 id="login-heading">Acceso al sitio</h2>
        <p class="muted">Introduce las credenciales de demo para ver el contenido. (S√≥lo demo)</p>

        <form id="global-login-form" onsubmit="event.preventDefault(); globalLogin()" aria-describedby="global-help">
          <label for="global-username-input">Nombre de usuario</label>
          <input id="global-username-input" class="input" name="username" type="text" autocomplete="username" required>

          <label for="global-password-input">Contrase√±a</label>
          <div style="display:flex;gap:8px;">
            <input id="global-password-input" class="input" name="password" type="password" autocomplete="current-password" required>
            <button type="button" class="btn btn-ghost" onclick="togglePassword('global-password-input')" aria-label="Mostrar contrase√±a">üëÅ</button>
          </div>

          <div style="display:flex;align-items:center;gap:8px;margin:8px 0">
            <input id="remember-me" type="checkbox" />
            <label for="remember-me" class="muted">Recordarme en este navegador</label>
          </div>

          <div style="display:flex;gap:8px">
            <button class="btn btn-primary" type="submit">Iniciar sesi√≥n</button>
            <button class="btn btn-ghost" type="button" onclick="fillDemo()">Cred demo</button>
          </div>

          <div id="global-auth-message" class="msg" role="status" aria-live="polite"></div>
          <p id="global-help" class="muted" style="margin-top:12px;font-size:.85rem">
            Para esta demo, las credenciales por defecto est√°n en el script (esto es inseguro). Recomendado: integrar un backend real.
          </p>
        </form>
      </aside>

      <!-- Contenido / Panel derecho -->
      <main id="main-content" class="card" role="main" aria-live="polite">
        <div style="display:flex;justify-content:space-between;align-items:center;gap:12px">
          <div>
            <h2 style="margin:0">Bienvenido a CARROT Movies</h2>
            <div class="muted">Explora las series y clips disponibles</div>
          </div>
          <div>
            <button class="btn btn-ghost" onclick="logout()">Cerrar sesi√≥n</button>
          </div>
        </div>

        <section aria-labelledby="serie-bocchi" style="margin-top:18px">
          <div class="section-title">
            <h2 id="serie-bocchi">Bocchi The Rock <span class="muted">(12 Videos)</span></h2>
          </div>
          <div class="video-grid" id="bocchi-grid">
            <!-- Ejemplo: los source usan data-src para lazy loading -->
            <article class="video-item">
              <video controls preload="metadata" poster="https://files.catbox.moe/8u3h8n.jpg" aria-label="Cap√≠tulo 1">
                <source data-src="https://files.catbox.moe/5h90ie.mp4" type="video/mp4">
                Tu navegador no soporta la etiqueta de video.
              </video>
              <p>Cap 1: Bocchi the rock.</p>
            </article>

            <article class="video-item">
              <video controls preload="metadata" poster="https://files.catbox.moe/8u3h8n.jpg" aria-label="Cap√≠tulo 2">
                <source data-src="https://files.catbox.moe/raj6qu.mp4" type="video/mp4">
                Tu navegador no soporta la etiqueta de video.
              </video>
              <p>Cap 2: Bocchi the rock.</p>
            </article>

            <!-- Resto de items: reemplaza data-src con tus URLs reales -->
            <article class="video-item">
              <video controls preload="metadata" poster="" aria-label="Cap√≠tulo 3">
                <source data-src="ruta/a/videos.mp4" type="video/mp4">
                Tu navegador no soporta la etiqueta de video.
              </video>
              <p>Cap 3: Bocchi the rock.</p>
            </article>

            <!-- A√±ade m√°s videos siguiendo el patr√≥n anterior -->
          </div>
        </section>

        <section aria-labelledby="otros" style="margin-top:18px">
          <div class="section-title">
            <h2 id="otros">Otros t√≠tulos</h2>
          </div>

          <div class="video-grid">
            <article class="video-item">
              <video controls preload="metadata">
                <source data-src="ruta/a/videos.mp4" type="video/mp4">
              </video>
              <p>Clip 1: Demo</p>
            </article>
          </div>
        </section>

        <section id="private-section" aria-labelledby="private-heading">
          <h3 id="private-heading">üîí Videos Privados del owner</h3>

          <div id="private-auth" style="margin-top:8px">
            <p class="muted">Protecci√≥n adicional ‚Äî introduce credenciales privadas (demo).</p>
            <div style="max-width:420px">
              <label for="username-input">Usuario (privado)</label>
              <input id="username-input" class="input" type="text" autocomplete="username">

              <label for="password-input">Contrase√±a (privada)</label>
              <div style="display:flex;gap:8px">
                <input id="password-input" class="input" type="password" autocomplete="current-password">
                <button type="button" class="btn btn-ghost" onclick="togglePassword('password-input')">üëÅ</button>
              </div>

              <div style="display:flex;gap:8px;margin-top:8px">
                <button class="btn btn-primary" onclick="checkCredentials()">Ver Videos Privados</button>
                <button class="btn btn-ghost" onclick="fillPrivateDemo()">Cred privado</button>
              </div>

              <div id="auth-message" class="msg" role="status" aria-live="polite"></div>
            </div>
          </div>

          <div id="private-videos-content" style="display:none;margin-top:12px">
            <div class="video-grid">
              <article class="video-item">
                <video controls preload="metadata">
                  <source data-src="https://files.catbox.moe/mx3d9h.mp4" type="video/mp4">
                </video>
                <p>Clip Privado 1</p>
              </article>

              <article class="video-item">
                <video controls preload="metadata">
                  <source data-src="https://files.catbox.moe/9rhazg.mp4" type="video/mp4">
                </video>
                <p>Clip Privado 2</p>
              </article>

              <!-- A√±ade el resto aqu√≠ -->
            </div>
          </div>
        </section>
      </main>
    </div>
  </div>

  <script>
    /* ================= DEMO CREDENTIALS (INSEGURAS) =================
       Estas credenciales est√°n aqu√≠ solo para que la demo funcione en
       un sitio est√°tico. ¬°NO las uses en producci√≥n!
       Reempl√°zalas o elimina estas l√≠neas si vas a implementar un backend.
    */
    const globalCorrectUsername = "UsuarioDemo";
    const globalCorrectPassword = "usuario11";
    const privateCorrectUsername = "KG359";
    const privateCorrectPassword = "Chizu8890";

    /* ================= Helpers UI ================= */
    function togglePassword(inputId){
      const i = document.getElementById(inputId);
      if(!i) return;
      i.type = (i.type === 'password') ? 'text' : 'password';
    }

    function fillDemo(){
      document.getElementById('global-username-input').value = globalCorrectUsername;
      document.getElementById('global-password-input').value = globalCorrectPassword;
    }
    function fillPrivateDemo(){
      document.getElementById('username-input').value = privateCorrectUsername;
      document.getElementById('password-input').value = privateCorrectPassword;
    }

    /* ================ Session (localStorage demo) ================= */
    function setLoggedIn(flag){
      try{
        if(document.getElementById('remember-me').checked){
          localStorage.setItem('carrot_logged', flag ? '1' : '0');
        } else {
          sessionStorage.setItem('carrot_logged', flag ? '1' : '0');
        }
      }catch(e){ /* ignore storage errors */ }
    }
    function isLoggedIn(){
      try{
        return localStorage.getItem('carrot_logged') === '1' || sessionStorage.getItem('carrot_logged') === '1';
      }catch(e){ return false }
    }

    /* ================ Global Login (cliente) ================= */
    function globalLogin(){
      const username = document.getElementById('global-username-input').value.trim();
      const password = document.getElementById('global-password-input').value;
      const msg = document.getElementById('global-auth-message');

      if(username === globalCorrectUsername && password === globalCorrectPassword){
        msg.textContent = 'Acceso concedido. Cargando contenido...';
        msg.className = 'msg success';
        showMainContent();
        setLoggedIn(true);
      } else {
        msg.textContent = 'Usuario o contrase√±a incorrectos.';
        msg.className = 'msg error';
        document.getElementById('global-password-input').value = '';
      }
    }

    function logout(){
      localStorage.removeItem('carrot_logged');
      sessionStorage.removeItem('carrot_logged');
      document.getElementById('main-content').style.display = 'none';
      document.getElementById('login-container').style.display = 'block';
      document.getElementById('global-auth-message').textContent = '';
      // pause videos and remove loaded src to free bandwidth
      document.querySelectorAll('video').forEach(v=>{
        try{ v.pause(); }catch(e){}
        // optional: unload source if we want
      });
      window.scrollTo({top:0,behavior:'smooth'});
    }

    /* ================ Private Videos (cliente) ================= */
    function checkCredentials(){
      const user = document.getElementById('username-input').value.trim();
      const pwd = document.getElementById('password-input').value;
      const authMsg = document.getElementById('auth-message');
      const privateForm = document.getElementById('private-auth');
      const privateContent = document.getElementById('private-videos-content');

      if(user === privateCorrectUsername && pwd === privateCorrectPassword){
        authMsg.textContent = 'Acceso concedido a contenidos privados.';
        authMsg.className = 'msg success';
        privateForm.style.display = 'none';
        privateContent.style.display = 'block';
        lazyLoadVisibleVideos(); // attempt to load private videos into DOM
      } else {
        authMsg.textContent = 'Usuario o contrase√±a privados incorrectos.';
        authMsg.className = 'msg error';
        document.getElementById('password-input').value = '';
      }
    }

    /* ================ Lazy loading de videos (IntersectionObserver) ================= */
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(entry=>{
        if(entry.isIntersecting){
          const video = entry.target;
          // cargar sources que tengan data-src
          video.querySelectorAll('source[data-src]').forEach(s=>{
            if(!s.src){
              s.src = s.getAttribute('data-src');
            }
          });
          // trigger load for video element
          try{ video.load(); }catch(e){}
          io.unobserve(video);
        }
      });
    },{ root: null, rootMargin: "200px", threshold: 0.1 });

    function observeVideos(){
      document.querySelectorAll('.video-item video').forEach(v=>{
        // don't observe videos that already have a loaded source
        const hasLoaded = Array.from(v.querySelectorAll('source')).some(s=>s.src);
        if(!hasLoaded) io.observe(v);
      });
    }

    function lazyLoadVisibleVideos(){
      // manual pass to set src for already-intersecting items
      document.querySelectorAll('.video-item video').forEach(v=>{
        const rect = v.getBoundingClientRect();
        if(rect.top < window.innerHeight + 200 && rect.bottom > -200){
          v.querySelectorAll('source[data-src]').forEach(s=>{
            if(!s.src) s.src = s.getAttribute('data-src');
          });
          try{ v.load(); }catch(e){}
        }
      });
    }

    /* ================ Init on load ================= */
    (function init(){
      // si hay sesi√≥n, mostrar contenido al cargar
      if(isLoggedIn()){
        showMainContent(true);
      }
      observeVideos();
      // mejora: recargar lazy-load al hacer scroll/resize
      window.addEventListener('scroll', lazyLoadVisibleVideos, {passive:true});
      window.addEventListener('resize', lazyLoadVisibleVideos);
    })();

    function showMainContent(skipMessage){
      document.getElementById('login-container').style.display = 'none';
      document.getElementById('main-content').style.display = 'block';
      if(!skipMessage){
        document.getElementById('global-auth-message').textContent = '';
      }
      // trigger observer for videos now that layout is visible
      observeVideos();
    }

    /* ===================================================================
       RECUERDA: Este proyecto es UNA DEMO. Para proteger realmente el
       contenido y credenciales debes:
       - Mover autenticaci√≥n al servidor (ej. Node.js/Express, PHP) y usar HTTPS.
       - Servir videos desde almacenamiento privado (S3/Cloud Storage) con URLs firmadas o desde un servidor que valide sesiones.
       - No incluir credenciales ni URLs sensibles en el HTML/JS p√∫blico.
       =================================================================== */
  </script>
</body>
</html>
